{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mapValues2 = _interopRequireDefault(require(\"lodash/mapValues\"));\n\nvar _values2 = _interopRequireDefault(require(\"lodash/values\"));\n\nvar _trimEnd2 = _interopRequireDefault(require(\"lodash/trimEnd\"));\n\nvar _makeStreamConfig = _interopRequireDefault(require(\"./makeStreamConfig\"));\n\nvar _drawRow = _interopRequireDefault(require(\"./drawRow\"));\n\nvar _drawBorder = require(\"./drawBorder\");\n\nvar _stringifyTableData = _interopRequireDefault(require(\"./stringifyTableData\"));\n\nvar _truncateTableData = _interopRequireDefault(require(\"./truncateTableData\"));\n\nvar _mapDataUsingRowHeightIndex = _interopRequireDefault(require(\"./mapDataUsingRowHeightIndex\"));\n\nvar _alignTableData = _interopRequireDefault(require(\"./alignTableData\"));\n\nvar _padTableData = _interopRequireDefault(require(\"./padTableData\"));\n\nvar _calculateRowHeightIndex = _interopRequireDefault(require(\"./calculateRowHeightIndex\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n/**\n * @param {Array} data\n * @param {Object} config\n * @returns {Array}\n */\n\n\nconst prepareData = (data, config) => {\n  let rows;\n  rows = (0, _stringifyTableData.default)(data);\n  rows = (0, _truncateTableData.default)(data, config);\n  const rowHeightIndex = (0, _calculateRowHeightIndex.default)(rows, config);\n  rows = (0, _mapDataUsingRowHeightIndex.default)(rows, rowHeightIndex, config);\n  rows = (0, _alignTableData.default)(rows, config);\n  rows = (0, _padTableData.default)(rows, config);\n  return rows;\n};\n/**\n * @param {string[]} row\n * @param {number[]} columnWidthIndex\n * @param {Object} config\n * @returns {undefined}\n */\n\n\nconst create = (row, columnWidthIndex, config) => {\n  const rows = prepareData([row], config);\n  const body = rows.map(literalRow => {\n    return (0, _drawRow.default)(literalRow, config.border);\n  }).join('');\n  let output;\n  output = '';\n  output += (0, _drawBorder.drawBorderTop)(columnWidthIndex, config.border);\n  output += body;\n  output += (0, _drawBorder.drawBorderBottom)(columnWidthIndex, config.border);\n  output = (0, _trimEnd2.default)(output);\n  process.stdout.write(output);\n};\n/**\n * @param {string[]} row\n * @param {number[]} columnWidthIndex\n * @param {Object} config\n * @returns {undefined}\n */\n\n\nconst append = (row, columnWidthIndex, config) => {\n  const rows = prepareData([row], config);\n  const body = rows.map(literalRow => {\n    return (0, _drawRow.default)(literalRow, config.border);\n  }).join('');\n  let output = '';\n  const bottom = (0, _drawBorder.drawBorderBottom)(columnWidthIndex, config.border);\n\n  if (bottom !== '\\n') {\n    output = '\\r\\u001B[K';\n  }\n\n  output += (0, _drawBorder.drawBorderJoin)(columnWidthIndex, config.border);\n  output += body;\n  output += bottom;\n  output = (0, _trimEnd2.default)(output);\n  process.stdout.write(output);\n};\n/**\n * @param {Object} userConfig\n * @returns {Object}\n */\n\n\nconst createStream = (userConfig = {}) => {\n  const config = (0, _makeStreamConfig.default)(userConfig); // @todo Use 'Object.values' when Node.js v6 support is dropped.\n\n  const columnWidthIndex = (0, _values2.default)((0, _mapValues2.default)(config.columns, column => {\n    return column.width + column.paddingLeft + column.paddingRight;\n  }));\n  let empty;\n  empty = true;\n  return {\n    /**\n     * @param {string[]} row\n     * @returns {undefined}\n     */\n    write: row => {\n      if (row.length !== config.columnCount) {\n        throw new Error('Row cell count does not match the config.columnCount.');\n      }\n\n      if (empty) {\n        empty = false;\n        return create(row, columnWidthIndex, config);\n      } else {\n        return append(row, columnWidthIndex, config);\n      }\n    }\n  };\n};\n\nvar _default = createStream;\nexports.default = _default;","map":{"version":3,"sources":["../src/createStream.js"],"names":["prepareData","rows","rowHeightIndex","create","body","literalRow","config","output","process","append","bottom","userConfig","columnWidthIndex","column","empty","write","row"],"mappings":"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","sourcesContent":["import _ from 'lodash';\nimport makeStreamConfig from './makeStreamConfig';\nimport drawRow from './drawRow';\nimport {\n  drawBorderBottom,\n  drawBorderJoin,\n  drawBorderTop\n} from './drawBorder';\nimport stringifyTableData from './stringifyTableData';\nimport truncateTableData from './truncateTableData';\nimport mapDataUsingRowHeightIndex from './mapDataUsingRowHeightIndex';\nimport alignTableData from './alignTableData';\nimport padTableData from './padTableData';\nimport calculateRowHeightIndex from './calculateRowHeightIndex';\n\n/**\n * @param {Array} data\n * @param {Object} config\n * @returns {Array}\n */\nconst prepareData = (data, config) => {\n  let rows;\n\n  rows = stringifyTableData(data);\n\n  rows = truncateTableData(data, config);\n\n  const rowHeightIndex = calculateRowHeightIndex(rows, config);\n\n  rows = mapDataUsingRowHeightIndex(rows, rowHeightIndex, config);\n  rows = alignTableData(rows, config);\n  rows = padTableData(rows, config);\n\n  return rows;\n};\n\n/**\n * @param {string[]} row\n * @param {number[]} columnWidthIndex\n * @param {Object} config\n * @returns {undefined}\n */\nconst create = (row, columnWidthIndex, config) => {\n  const rows = prepareData([row], config);\n\n  const body = rows.map((literalRow) => {\n    return drawRow(literalRow, config.border);\n  }).join('');\n\n  let output;\n\n  output = '';\n\n  output += drawBorderTop(columnWidthIndex, config.border);\n  output += body;\n  output += drawBorderBottom(columnWidthIndex, config.border);\n\n  output = _.trimEnd(output);\n\n  process.stdout.write(output);\n};\n\n/**\n * @param {string[]} row\n * @param {number[]} columnWidthIndex\n * @param {Object} config\n * @returns {undefined}\n */\nconst append = (row, columnWidthIndex, config) => {\n  const rows = prepareData([row], config);\n\n  const body = rows.map((literalRow) => {\n    return drawRow(literalRow, config.border);\n  }).join('');\n\n  let output = '';\n  const bottom = drawBorderBottom(columnWidthIndex, config.border);\n\n  if (bottom !== '\\n') {\n    output = '\\r\\u001B[K';\n  }\n\n  output += drawBorderJoin(columnWidthIndex, config.border);\n  output += body;\n  output += bottom;\n\n  output = _.trimEnd(output);\n\n  process.stdout.write(output);\n};\n\n/**\n * @param {Object} userConfig\n * @returns {Object}\n */\nexport default (userConfig = {}) => {\n  const config = makeStreamConfig(userConfig);\n\n  // @todo Use 'Object.values' when Node.js v6 support is dropped.\n  const columnWidthIndex = _.values(_.mapValues(config.columns, (column) => {\n    return column.width + column.paddingLeft + column.paddingRight;\n  }));\n\n  let empty;\n\n  empty = true;\n\n  return {\n    /**\n     * @param {string[]} row\n     * @returns {undefined}\n     */\n    write: (row) => {\n      if (row.length !== config.columnCount) {\n        throw new Error('Row cell count does not match the config.columnCount.');\n      }\n\n      if (empty) {\n        empty = false;\n\n        return create(row, columnWidthIndex, config);\n      } else {\n        return append(row, columnWidthIndex, config);\n      }\n    }\n  };\n};\n"]},"metadata":{},"sourceType":"script"}