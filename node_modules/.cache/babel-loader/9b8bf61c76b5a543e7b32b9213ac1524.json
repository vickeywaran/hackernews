{"ast":null,"code":"var _jsxFileName = \"/home/vickey/Desktop/mine/src/pages/Detail/Detail.js\";\nimport React from 'react';\nimport { commentsPerLoad } from '../../constants';\nimport { itemUrl } from '../../api/endpoints';\nimport Post from '../../Component/Story/Post';\nimport Comment from '../../Component/Comment';\nimport withLoading from '../../hoc/withLoading';\nimport { handleError } from '../../api/helpers';\nconst EnhancedStory = withLoading(Post);\n\nclass Detail extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.getStory = () => {\n      fetch(itemUrl(this.props.match.params.storyId)).then(handleError).then(response => response.json()).then(data => {\n        this.setState({\n          data: { ...data\n          },\n          isLoading: false\n        }, () => {\n          if (this.state.data.kids) {\n            this.loadComments();\n          } else {\n            this.setState({\n              allCommentsLoaded: true\n            });\n          }\n        });\n      }).catch(error => {\n        this.setState({\n          error: true\n        });\n      });\n    };\n\n    this.loadComments = () => {\n      const endIndex = this.state.activeComments.length + commentsPerLoad;\n      this.setState({\n        activeComments: [...this.state.data.kids.slice(0, endIndex)]\n      }, () => {\n        if (this.state.data.kids.length === this.state.activeComments.length) {\n          this.setState({\n            allCommentsLoaded: true\n          });\n        }\n      });\n    };\n\n    this.state = {\n      data: {},\n      isLoading: true,\n      activeComments: [],\n      allCommentsLoaded: false,\n      error: false\n    };\n  }\n\n  componentDidMount() {\n    this.getStory();\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(EnhancedStory, {\n      error: this.state.error,\n      isLoading: this.state.isLoading,\n      data: this.state.data,\n      type: \"story\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }\n    }), this.state.activeComments.map(id => /*#__PURE__*/React.createElement(Comment, {\n      id: id,\n      key: id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 46\n      }\n    })), !this.state.error && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"detail-actions\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn\",\n      onClick: this.loadComments,\n      disabled: this.state.allCommentsLoaded,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 13\n      }\n    }, this.state.allCommentsLoaded ? 'No More Comments' : 'More Comments')));\n  }\n\n}\n\nexport default Detail;","map":{"version":3,"sources":["/home/vickey/Desktop/mine/src/pages/Detail/Detail.js"],"names":["React","commentsPerLoad","itemUrl","Post","Comment","withLoading","handleError","EnhancedStory","Detail","Component","constructor","props","getStory","fetch","match","params","storyId","then","response","json","data","setState","isLoading","state","kids","loadComments","allCommentsLoaded","catch","error","endIndex","activeComments","length","slice","componentDidMount","render","map","id"],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport { commentsPerLoad } from '../../constants';\nimport { itemUrl } from '../../api/endpoints';\nimport Post from '../../Component/Story/Post';\nimport Comment from '../../Component/Comment';\nimport withLoading from '../../hoc/withLoading';\nimport { handleError } from '../../api/helpers';\n\nconst EnhancedStory = withLoading(Post);\n\nclass Detail extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      data: {},\n      isLoading: true,\n      activeComments: [],\n      allCommentsLoaded: false,\n      error: false\n    }\n  }\n\n  componentDidMount() {\n    this.getStory();\n  }\n\n  getStory = () => {\n    fetch(itemUrl(this.props.match.params.storyId))\n      .then(handleError)\n      .then(response => response.json())\n      .then(data => {\n        this.setState({\n          data: { ...data },\n          isLoading: false,\n        }, () => {\n          if (this.state.data.kids) {\n            this.loadComments()\n          } else {\n            this.setState({ allCommentsLoaded: true });\n          }\n        });\n      })\n      .catch(error => {\n        this.setState({\n          error: true\n        });\n      });\n  }\n\n  loadComments = () => {\n    const endIndex = this.state.activeComments.length + commentsPerLoad;\n\n    this.setState({\n      activeComments: [...this.state.data.kids.slice(0, endIndex)]\n    }, () => {\n\n      if (this.state.data.kids.length === this.state.activeComments.length) {\n        this.setState({\n          allCommentsLoaded: true\n        });\n\n      }\n    });\n  }\n\n  render() {\n    return (\n      <div>\n        <EnhancedStory\n          error={this.state.error}\n          isLoading={this.state.isLoading}\n          data={this.state.data}\n          type=\"story\"\n        />\n\n        {this.state.activeComments.map(id => <Comment id={id} key={id} />)}\n\n        {!this.state.error &&\n          <div className=\"detail-actions\">\n            <button\n              className=\"btn\"\n              onClick={this.loadComments}\n              disabled={this.state.allCommentsLoaded}>\n              {this.state.allCommentsLoaded ? 'No More Comments' : 'More Comments'}\n            </button>\n          </div>\n        }\n      </div>\n    )\n  }\n}\n\nexport default Detail;"]},"metadata":{},"sourceType":"module"}